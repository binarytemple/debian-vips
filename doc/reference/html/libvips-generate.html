<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>generate</title>
<meta name="generator" content="DocBook XSL Stylesheets V1.75.1">
<link rel="home" href="index.html" title="VIPS Reference Manual">
<link rel="up" href="ch01.html" title="Core VIPS API">
<link rel="prev" href="libvips-region.html" title="region">
<link rel="next" href="libvips-threadgroup.html" title="threadgroup">
<meta name="generator" content="GTK-Doc V1.11 (XML mode)">
<link rel="stylesheet" href="style.css" type="text/css">
<link rel="chapter" href="ch01.html" title="Core VIPS API">
<link rel="chapter" href="ch02.html" title="VIPS operation API by section">
<link rel="chapter" href="ch03.html" title="VIPS operation API by section (no gtkdoc comments yet)">
<link rel="chapter" href="ch04.html" title="Other API (no gtkdoc comments yet)">
<link rel="chapter" href="object-tree.html" title="Object Hierarchy">
<link rel="index" href="api-index-full.html" title="API Index">
</head>
<body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF">
<table class="navigation" id="top" width="100%" summary="Navigation header" cellpadding="2" cellspacing="2">
<tr valign="middle">
<td><a accesskey="p" href="libvips-region.html"><img src="left.png" width="24" height="24" border="0" alt="Prev"></a></td>
<td><a accesskey="u" href="ch01.html"><img src="up.png" width="24" height="24" border="0" alt="Up"></a></td>
<td><a accesskey="h" href="index.html"><img src="home.png" width="24" height="24" border="0" alt="Home"></a></td>
<th width="100%" align="center">VIPS Reference Manual</th>
<td><a accesskey="n" href="libvips-threadgroup.html"><img src="right.png" width="24" height="24" border="0" alt="Next"></a></td>
</tr>
<tr><td colspan="5" class="shortcuts">
<a href="#libvips-generate.synopsis" class="shortcut">Top</a>
                 | 
                <a href="#libvips-generate.description" class="shortcut">Description</a>
</td></tr>
</table>
<div class="refentry" title="generate">
<a name="libvips-generate"></a><div class="titlepage"></div>
<div class="refnamediv"><table width="100%"><tr>
<td valign="top">
<h2><span class="refentrytitle"><a name="libvips-generate.top_of_page"></a>generate</span></h2>
<p>generate — calculate pixels and pixel buffers</p>
</td>
<td valign="top" align="right"></td>
</tr></table></div>
<div class="refsect1" title="Stability Level">
<a name="libvips-generate.stability-level"></a><h2>Stability Level</h2>
Stable, unless otherwise indicated
</div>
<div class="refsynopsisdiv" title="Synopsis">
<a name="libvips-generate.synopsis"></a><h2>Synopsis</h2>
<pre class="synopsis">

#include &lt;vips/vips.h&gt;

int                 <a
href="../libvips/libvips-generate.html#im-prepare"
>im_prepare</a>                          (<a
href="../libvips/libvips-region.html#REGION--CAPS"
>REGION</a> *reg,
                                                         <a
href="../libvips/libvips-rect.html#Rect"
>Rect</a> *r);
int                 <a
href="../libvips/libvips-generate.html#im-prepare-to"
>im_prepare_to</a>                       (<a
href="../libvips/libvips-region.html#REGION--CAPS"
>REGION</a> *reg,
                                                         <a
href="../libvips/libvips-region.html#REGION--CAPS"
>REGION</a> *dest,
                                                         <a
href="../libvips/libvips-rect.html#Rect"
>Rect</a> *r,
                                                         int x,
                                                         int y);
void *              (<a
href="../libvips/libvips-generate.html#im-start-fn"
>*im_start_fn</a>)                      (IMAGE *out,
                                                         void *a,
                                                         void *b);
int                 (<a
href="../libvips/libvips-generate.html#im-generate-fn"
>*im_generate_fn</a>)                   (<a
href="../libvips/libvips-region.html#REGION--CAPS"
>REGION</a> *out,
                                                         void *seq,
                                                         void *a,
                                                         void *b);
int                 (<a
href="../libvips/libvips-generate.html#im-stop-fn"
>*im_stop_fn</a>)                       (void *seq,
                                                         void *a,
                                                         void *b);
void *              <a
href="../libvips/libvips-generate.html#im-start-one"
>im_start_one</a>                        (IMAGE *out,
                                                         void *in,
                                                         void *dummy);
int                 <a
href="../libvips/libvips-generate.html#im-stop-one"
>im_stop_one</a>                         (void *seq,
                                                         void *dummy1,
                                                         void *dummy2);
void *              <a
href="../libvips/libvips-generate.html#im-start-many"
>im_start_many</a>                       (IMAGE *out,
                                                         void *in,
                                                         void *dummy);
int                 <a
href="../libvips/libvips-generate.html#im-stop-many"
>im_stop_many</a>                        (void *seq,
                                                         void *dummy1,
                                                         void *dummy2);
IMAGE **            <a
href="../libvips/libvips-generate.html#im-allocate-input-array"
>im_allocate_input_array</a>             (IMAGE *out,
                                                         ...);
int                 <a
href="../libvips/libvips-generate.html#im-generate"
>im_generate</a>                         (IMAGE *im,
                                                         <a
href="../libvips/libvips-generate.html#im-start-fn"
>im_start_fn</a> start,
                                                         <a
href="../libvips/libvips-generate.html#im-generate-fn"
>im_generate_fn</a> generate,
                                                         <a
href="../libvips/libvips-generate.html#im-stop-fn"
>im_stop_fn</a> stop,
                                                         void *a,
                                                         void *b);
int                 <a
href="../libvips/libvips-generate.html#im-iterate"
>im_iterate</a>                          (IMAGE *im,
                                                         <a
href="../libvips/libvips-generate.html#im-start-fn"
>im_start_fn</a> start,
                                                         <a
href="../libvips/libvips-generate.html#im-generate-fn"
>im_generate_fn</a> generate,
                                                         <a
href="../libvips/libvips-generate.html#im-stop-fn"
>im_stop_fn</a> stop,
                                                         void *a,
                                                         void *b);
int                 <a
href="../libvips/libvips-generate.html#im-demand-hint-array"
>im_demand_hint_array</a>                (IMAGE *im,
                                                         im_demand_type hint,
                                                         IMAGE **in);
int                 <a
href="../libvips/libvips-generate.html#im-demand-hint"
>im_demand_hint</a>                      (IMAGE *im,
                                                         im_demand_type hint,
                                                         ...);
void                (<a
href="../libvips/libvips-generate.html#im-wrapone-fn"
>*im_wrapone_fn</a>)                    (void *in,
                                                         void *out,
                                                         int width,
                                                         void *a,
                                                         void *b);
int                 <a
href="../libvips/libvips-generate.html#im-wrapone"
>im_wrapone</a>                          (IMAGE *in,
                                                         IMAGE *out,
                                                         <a
href="../libvips/libvips-generate.html#im-wrapone-fn"
>im_wrapone_fn</a> fn,
                                                         void *a,
                                                         void *b);
void                (<a
href="../libvips/libvips-generate.html#im-wraptwo-fn"
>*im_wraptwo_fn</a>)                    (void *in1,
                                                         void *in2,
                                                         void *out,
                                                         int width,
                                                         void *a,
                                                         void *b);
int                 <a
href="../libvips/libvips-generate.html#im-wraptwo"
>im_wraptwo</a>                          (IMAGE *in1,
                                                         IMAGE *in2,
                                                         IMAGE *out,
                                                         <a
href="../libvips/libvips-generate.html#im-wraptwo-fn"
>im_wraptwo_fn</a> fn,
                                                         void *a,
                                                         void *b);
void                (<a
href="../libvips/libvips-generate.html#im-wrapmany-fn"
>*im_wrapmany_fn</a>)                   (void **in,
                                                         void *out,
                                                         int width,
                                                         void *a,
                                                         void *b);
int                 <a
href="../libvips/libvips-generate.html#im-wrapmany"
>im_wrapmany</a>                         (IMAGE **in,
                                                         IMAGE *out,
                                                         <a
href="../libvips/libvips-generate.html#im-wrapmany-fn"
>im_wrapmany_fn</a> fn,
                                                         void *a,
                                                         void *b);
int                 <a
href="../libvips/libvips-generate.html#im-render-priority"
>im_render_priority</a>                  (IMAGE *in,
                                                         IMAGE *out,
                                                         IMAGE *mask,
                                                         int width,
                                                         int height,
                                                         int max,
                                                         int priority,
                                                         void (notify IMAGE *, Rect *, void * ) (),
                                                         void *client);
int                 <a
href="../libvips/libvips-generate.html#im-cache"
>im_cache</a>                            (IMAGE *in,
                                                         IMAGE *out,
                                                         int width,
                                                         int height,
                                                         int max);
int                 <a
href="../libvips/libvips-generate.html#im-setupout"
>im_setupout</a>                         (IMAGE *im);
int                 <a
href="../libvips/libvips-generate.html#im-writeline"
>im_writeline</a>                        (int ypos,
                                                         IMAGE *im,
                                                         PEL *linebuffer);
</pre>
</div>
<div class="refsect1" title="Description">
<a name="libvips-generate.description"></a><h2>Description</h2>
<p>
These functions let you generate regions of pixels in an image
processing operation, and ask for regions of image to be calculated.</p>
</div>
<div class="refsect1" title="Details">
<a name="libvips-generate.details"></a><h2>Details</h2>
<div class="refsect2" title="im_prepare ()">
<a name="im-prepare"></a><h3>im_prepare ()</h3>
<pre class="programlisting">int                 im_prepare                          (<a
href="../libvips/libvips-region.html#REGION--CAPS"
>REGION</a> *reg,
                                                         <a
href="../libvips/libvips-rect.html#Rect"
>Rect</a> *r);</pre>
<p>
<a
href="../libvips/libvips-generate.html#im-prepare"
><code class="function">im_prepare()</code></a> fills <em class="parameter"><code>reg</code></em> with pixels. After calling, you can address at
least the area <em class="parameter"><code>r</code></em> with <a
href="../libvips/libvips-region.html#IM-REGION-ADDR--CAPS"
><code class="function">IM_REGION_ADDR()</code></a> and get valid pixels.
</p>
<p>
<a
href="../libvips/libvips-generate.html#im-prepare"
><code class="function">im_prepare()</code></a> runs in-line, that is, computation is done by the calling
thread, no new threads are involved, and computation blocks until the
pixels are ready.
</p>
<p>
Use <a
href="../libvips/libvips-threadgroup.html#im-prepare-thread"
><code class="function">im_prepare_thread()</code></a> to calculate an area of pixels with many
threads. Use <a
href="../libvips/libvips-generate.html#im-render-priority"
><code class="function">im_render_priority()</code></a> to calculate an area of pixels in the 
background.
</p>
<p>
See also: <a
href="../libvips/libvips-threadgroup.html#im-prepare-thread"
><code class="function">im_prepare_thread()</code></a>, <a
href="../libvips/libvips-generate.html#im-render-priority"
><code class="function">im_render_priority()</code></a>, <a
href="../libvips/libvips-generate.html#im-prepare-to"
><code class="function">im_prepare_to()</code></a>.</p>
<div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody>
<tr>
<td><p><span class="term"><em class="parameter"><code>reg</code></em> :</span></p></td>
<td> region to prepare
</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>r</code></em> :</span></p></td>
<td> <a
href="../libvips/libvips-rect.html#Rect"
><span class="type">Rect</span></a> of pixels you need to be able to address
</td>
</tr>
<tr>
<td><p><span class="term"><span class="emphasis"><em>Returns</em></span> :</span></p></td>
<td> 0 on success, or -1 on error.
</td>
</tr>
</tbody>
</table></div>
</div>
<hr>
<div class="refsect2" title="im_prepare_to ()">
<a name="im-prepare-to"></a><h3>im_prepare_to ()</h3>
<pre class="programlisting">int                 im_prepare_to                       (<a
href="../libvips/libvips-region.html#REGION--CAPS"
>REGION</a> *reg,
                                                         <a
href="../libvips/libvips-region.html#REGION--CAPS"
>REGION</a> *dest,
                                                         <a
href="../libvips/libvips-rect.html#Rect"
>Rect</a> *r,
                                                         int x,
                                                         int y);</pre>
<p>
Like <a
href="../libvips/libvips-generate.html#im-prepare"
><code class="function">im_prepare()</code></a>: fill <em class="parameter"><code>reg</code></em> with data, ready to be read from by our caller.
Unlike <a
href="../libvips/libvips-generate.html#im-prepare"
><code class="function">im_prepare()</code></a>, rather than allocating memory local to <em class="parameter"><code>reg</code></em> for the
result, we guarantee that we will fill the pixels in <em class="parameter"><code>dest</code></em> at offset <em class="parameter"><code>x</code></em>, <em class="parameter"><code>y</code></em>.
In other words, we generate an extra copy operation if necessary. 
</p>
<p>
See also: <a
href="../libvips/libvips-generate.html#im-prepare"
><code class="function">im_prepare()</code></a>.</p>
<div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody>
<tr>
<td><p><span class="term"><em class="parameter"><code>reg</code></em> :</span></p></td>
<td> region to prepare
</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>dest</code></em> :</span></p></td>
<td> region to write to
</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>r</code></em> :</span></p></td>
<td> <a
href="../libvips/libvips-rect.html#Rect"
><span class="type">Rect</span></a> of pixels you need to be able to address
</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>x</code></em> :</span></p></td>
<td> postion of <em class="parameter"><code>r</code></em> in <em class="parameter"><code>dest</code></em>
</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>y</code></em> :</span></p></td>
<td> postion of <em class="parameter"><code>r</code></em> in <em class="parameter"><code>dest</code></em>
</td>
</tr>
<tr>
<td><p><span class="term"><span class="emphasis"><em>Returns</em></span> :</span></p></td>
<td> 0 on success, or -1 on error
</td>
</tr>
</tbody>
</table></div>
</div>
<hr>
<div class="refsect2" title="im_start_fn ()">
<a name="im-start-fn"></a><h3>im_start_fn ()</h3>
<pre class="programlisting">void *              (*im_start_fn)                      (IMAGE *out,
                                                         void *a,
                                                         void *b);</pre>
<p>
Start a new processing sequence for this generate function. This allocates
per-thread state, such as an input region.
</p>
<p>
See also: <a
href="../libvips/libvips-generate.html#im-start-one"
><code class="function">im_start_one()</code></a>, <a
href="../libvips/libvips-generate.html#im-start-many"
><code class="function">im_start_many()</code></a>.</p>
<div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody>
<tr>
<td><p><span class="term"><em class="parameter"><code>out</code></em> :</span></p></td>
<td> image being calculated
</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>a</code></em> :</span></p></td>
<td> user data
</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>b</code></em> :</span></p></td>
<td> user data
</td>
</tr>
<tr>
<td><p><span class="term"><span class="emphasis"><em>Returns</em></span> :</span></p></td>
<td> a new sequence value
</td>
</tr>
</tbody>
</table></div>
</div>
<hr>
<div class="refsect2" title="im_generate_fn ()">
<a name="im-generate-fn"></a><h3>im_generate_fn ()</h3>
<pre class="programlisting">int                 (*im_generate_fn)                   (<a
href="../libvips/libvips-region.html#REGION--CAPS"
>REGION</a> *out,
                                                         void *seq,
                                                         void *a,
                                                         void *b);</pre>
<p>
Fill <em class="parameter"><code>out-&gt;valid</code></em> with pixels. <em class="parameter"><code>seq</code></em> contains per-thread state, such as the
input regions.
</p>
<p>
See also: <a
href="../libvips/libvips-generate.html#im-generate"
><code class="function">im_generate()</code></a>, <a
href="../libvips/libvips-generate.html#im-stop-many"
><code class="function">im_stop_many()</code></a>.</p>
<div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody>
<tr>
<td><p><span class="term"><em class="parameter"><code>out</code></em> :</span></p></td>
<td> <a
href="../libvips/libvips-region.html#REGION--CAPS"
><span class="type">REGION</span></a> to fill
</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>seq</code></em> :</span></p></td>
<td> sequence value
</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>a</code></em> :</span></p></td>
<td> user data
</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>b</code></em> :</span></p></td>
<td> user data
</td>
</tr>
<tr>
<td><p><span class="term"><span class="emphasis"><em>Returns</em></span> :</span></p></td>
<td> 0 on success, -1 on error.
</td>
</tr>
</tbody>
</table></div>
</div>
<hr>
<div class="refsect2" title="im_stop_fn ()">
<a name="im-stop-fn"></a><h3>im_stop_fn ()</h3>
<pre class="programlisting">int                 (*im_stop_fn)                       (void *seq,
                                                         void *a,
                                                         void *b);</pre>
<p>
Stop a processing sequence. This frees
per-thread state, such as an input region.
</p>
<p>
See also: <a
href="../libvips/libvips-generate.html#im-stop-one"
><code class="function">im_stop_one()</code></a>, <a
href="../libvips/libvips-generate.html#im-stop-many"
><code class="function">im_stop_many()</code></a>.</p>
<div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody>
<tr>
<td><p><span class="term"><em class="parameter"><code>seq</code></em> :</span></p></td>
<td> sequence value
</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>a</code></em> :</span></p></td>
<td> user data
</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>b</code></em> :</span></p></td>
<td> user data
</td>
</tr>
<tr>
<td><p><span class="term"><span class="emphasis"><em>Returns</em></span> :</span></p></td>
<td> 0 on success, -1 on error.
</td>
</tr>
</tbody>
</table></div>
</div>
<hr>
<div class="refsect2" title="im_start_one ()">
<a name="im-start-one"></a><h3>im_start_one ()</h3>
<pre class="programlisting">void *              im_start_one                        (IMAGE *out,
                                                         void *in,
                                                         void *dummy);</pre>
<p>
Start function for one image in. Input image is first user data.
</p>
<p>
See also: <a
href="../libvips/libvips-generate.html#im-generate"
><code class="function">im_generate()</code></a>.</p>
</div>
<hr>
<div class="refsect2" title="im_stop_one ()">
<a name="im-stop-one"></a><h3>im_stop_one ()</h3>
<pre class="programlisting">int                 im_stop_one                         (void *seq,
                                                         void *dummy1,
                                                         void *dummy2);</pre>
<p>
Stop function for one image in. Input image is first user data.
</p>
<p>
See also: <a
href="../libvips/libvips-generate.html#im-generate"
><code class="function">im_generate()</code></a>.</p>
</div>
<hr>
<div class="refsect2" title="im_start_many ()">
<a name="im-start-many"></a><h3>im_start_many ()</h3>
<pre class="programlisting">void *              im_start_many                       (IMAGE *out,
                                                         void *in,
                                                         void *dummy);</pre>
<p>
Start function for many images in. First client is a pointer to 
a <code class="literal">NULL</code>-terminated array of input images.
</p>
<p>
See also: <a
href="../libvips/libvips-generate.html#im-generate"
><code class="function">im_generate()</code></a>, <a
href="../libvips/libvips-generate.html#im-allocate-input-array"
><code class="function">im_allocate_input_array()</code></a></p>
</div>
<hr>
<div class="refsect2" title="im_stop_many ()">
<a name="im-stop-many"></a><h3>im_stop_many ()</h3>
<pre class="programlisting">int                 im_stop_many                        (void *seq,
                                                         void *dummy1,
                                                         void *dummy2);</pre>
<p>
Stop function for many images in. First client is a pointer to 
a <code class="literal">NULL</code>-terminated array of input images.
</p>
<p>
See also: <a
href="../libvips/libvips-generate.html#im-generate"
><code class="function">im_generate()</code></a>.</p>
</div>
<hr>
<div class="refsect2" title="im_allocate_input_array ()">
<a name="im-allocate-input-array"></a><h3>im_allocate_input_array ()</h3>
<pre class="programlisting">IMAGE **            im_allocate_input_array             (IMAGE *out,
                                                         ...);</pre>
<p>
Convenience function --- make a <code class="literal">NULL</code>-terminated array of input images.
Use with <a
href="../libvips/libvips-generate.html#im-start-many"
><code class="function">im_start_many()</code></a>.
</p>
<p>
See also: <a
href="../libvips/libvips-generate.html#im-generate"
><code class="function">im_generate()</code></a>, <a
href="../libvips/libvips-generate.html#im-start-many"
><code class="function">im_start_many()</code></a>.</p>
<div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody>
<tr>
<td><p><span class="term"><em class="parameter"><code>out</code></em> :</span></p></td>
<td> free array when this image closes
</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>...</code></em> :</span></p></td>
<td> <code class="literal">NULL</code>-terminated list of input images
</td>
</tr>
<tr>
<td><p><span class="term"><span class="emphasis"><em>Returns</em></span> :</span></p></td>
<td> <code class="literal">NULL</code>-terminated array of images. Do not free the result.
</td>
</tr>
</tbody>
</table></div>
</div>
<hr>
<div class="refsect2" title="im_generate ()">
<a name="im-generate"></a><h3>im_generate ()</h3>
<pre class="programlisting">int                 im_generate                         (IMAGE *im,
                                                         <a
href="../libvips/libvips-generate.html#im-start-fn"
>im_start_fn</a> start,
                                                         <a
href="../libvips/libvips-generate.html#im-generate-fn"
>im_generate_fn</a> generate,
                                                         <a
href="../libvips/libvips-generate.html#im-stop-fn"
>im_stop_fn</a> stop,
                                                         void *a,
                                                         void *b);</pre>
<p>
Generates an image. The action depends on the image type.
</p>
<p>
For images opened with "p", <a
href="../libvips/libvips-generate.html#im-generate"
><code class="function">im_generate()</code></a> just attaches the
start/generate/stop callbacks and returns.
</p>
<p>
For "t" images, memory is allocated for the image and <a
href="../libvips/libvips-threadgroup.html#im-prepare-thread"
><code class="function">im_prepare_thread()</code></a>
used to fill it with pixels.
</p>
<p>
For "w" images, memory for a few scanlines is allocated and
<a
href="../libvips/libvips-threadgroup.html#im-prepare-thread"
><code class="function">im_prepare_thread()</code></a> used to generate the image in small chunks. As each
chunk is generated, it is written to disc.
</p>
<p>
See also: <a
href="../libvips/libvips-generate.html#im-iterate"
><code class="function">im_iterate()</code></a>, <a
href="../libvips/libvips-image.html#im-open"
><code class="function">im_open()</code></a>, <a
href="../libvips/libvips-generate.html#im-prepare"
><code class="function">im_prepare()</code></a>, <a
href="../libvips/libvips-generate.html#im-wrapone"
><code class="function">im_wrapone()</code></a>.</p>
<div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody>
<tr>
<td><p><span class="term"><em class="parameter"><code>im</code></em> :</span></p></td>
<td> generate this image
</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>start</code></em> :</span></p></td>
<td> start sequences with this function
</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>generate</code></em> :</span></p></td>
<td> generate pixels with this function
</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>stop</code></em> :</span></p></td>
<td> stop sequences with this function
</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>a</code></em> :</span></p></td>
<td> user data
</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>b</code></em> :</span></p></td>
<td> user data
</td>
</tr>
<tr>
<td><p><span class="term"><span class="emphasis"><em>Returns</em></span> :</span></p></td>
<td> 0 on success, or -1 on error.
</td>
</tr>
</tbody>
</table></div>
</div>
<hr>
<div class="refsect2" title="im_iterate ()">
<a name="im-iterate"></a><h3>im_iterate ()</h3>
<pre class="programlisting">int                 im_iterate                          (IMAGE *im,
                                                         <a
href="../libvips/libvips-generate.html#im-start-fn"
>im_start_fn</a> start,
                                                         <a
href="../libvips/libvips-generate.html#im-generate-fn"
>im_generate_fn</a> generate,
                                                         <a
href="../libvips/libvips-generate.html#im-stop-fn"
>im_stop_fn</a> stop,
                                                         void *a,
                                                         void *b);</pre>
<p>
Loops over an image. <em class="parameter"><code>generate</code></em> is called for every pixel in the image, with
the <em class="parameter"><code>reg</code></em> argument being a region of pixels for processing. <a
href="../libvips/libvips-generate.html#im-iterate"
><code class="function">im_iterate()</code></a> is
used to implement operations like <a
href="../libvips/libvips-arithmetic.html#im-avg"
><code class="function">im_avg()</code></a> which have no image output.
</p>
<p>
See also: <a
href="../libvips/libvips-generate.html#im-generate"
><code class="function">im_generate()</code></a>, <a
href="../libvips/libvips-image.html#im-open"
><code class="function">im_open()</code></a>.</p>
<div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody>
<tr>
<td><p><span class="term"><em class="parameter"><code>im</code></em> :</span></p></td>
<td> scan over this image
</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>start</code></em> :</span></p></td>
<td> start sequences with this function
</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>generate</code></em> :</span></p></td>
<td> generate pixels with this function
</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>stop</code></em> :</span></p></td>
<td> stop sequences with this function
</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>a</code></em> :</span></p></td>
<td> user data
</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>b</code></em> :</span></p></td>
<td> user data
</td>
</tr>
<tr>
<td><p><span class="term"><span class="emphasis"><em>Returns</em></span> :</span></p></td>
<td> 0 on success, or -1 on error.
</td>
</tr>
</tbody>
</table></div>
</div>
<hr>
<div class="refsect2" title="im_demand_hint_array ()">
<a name="im-demand-hint-array"></a><h3>im_demand_hint_array ()</h3>
<pre class="programlisting">int                 im_demand_hint_array                (IMAGE *im,
                                                         im_demand_type hint,
                                                         IMAGE **in);</pre>
<p>
Operations can set demand hints, that is, hints to the VIPS IO system about
the type of region geometry this operation works best with. For example,
operations which transform coordinates will usually work best with
<code class="literal">IM_SMALLTILE</code>, operations which work on local windows of pixels will like
<code class="literal">IM_FATSTRIP</code>.
</p>
<p>
VIPS uses the list of input images to build the tree of operations it needs
for the cache invalidation system. You have to call this function, or its
varargs friend <a
href="../libvips/libvips-generate.html#im-demand-hint"
><code class="function">im_demand_hint()</code></a>.
</p>
<p>
See also: <a
href="../libvips/libvips-generate.html#im-demand-hint"
><code class="function">im_demand_hint()</code></a>, <a
href="../libvips/libvips-generate.html#im-generate"
><code class="function">im_generate()</code></a>.</p>
<div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody>
<tr>
<td><p><span class="term"><em class="parameter"><code>im</code></em> :</span></p></td>
<td> image to set hint for
</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>hint</code></em> :</span></p></td>
<td> hint for this image
</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>in</code></em> :</span></p></td>
<td> array of input images to this operation
</td>
</tr>
<tr>
<td><p><span class="term"><span class="emphasis"><em>Returns</em></span> :</span></p></td>
<td> 0 on success, or -1 on error.
</td>
</tr>
</tbody>
</table></div>
</div>
<hr>
<div class="refsect2" title="im_demand_hint ()">
<a name="im-demand-hint"></a><h3>im_demand_hint ()</h3>
<pre class="programlisting">int                 im_demand_hint                      (IMAGE *im,
                                                         im_demand_type hint,
                                                         ...);</pre>
<p>
Build an array and call <a
href="../libvips/libvips-generate.html#im-demand-hint-array"
><code class="function">im_demand_hint_array()</code></a>.
</p>
<p>
See also: <a
href="../libvips/libvips-generate.html#im-demand-hint"
><code class="function">im_demand_hint()</code></a>, <a
href="../libvips/libvips-generate.html#im-generate"
><code class="function">im_generate()</code></a>.</p>
<div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody>
<tr>
<td><p><span class="term"><em class="parameter"><code>im</code></em> :</span></p></td>
<td> image to set hint for
</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>hint</code></em> :</span></p></td>
<td> hint for this image
</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>...</code></em> :</span></p></td>
<td> <code class="literal">NULL</code>-terminated list of input images to this operation
</td>
</tr>
<tr>
<td><p><span class="term"><span class="emphasis"><em>Returns</em></span> :</span></p></td>
<td> 0 on success, or -1 on error.
</td>
</tr>
</tbody>
</table></div>
</div>
<hr>
<div class="refsect2" title="im_wrapone_fn ()">
<a name="im-wrapone-fn"></a><h3>im_wrapone_fn ()</h3>
<pre class="programlisting">void                (*im_wrapone_fn)                    (void *in,
                                                         void *out,
                                                         int width,
                                                         void *a,
                                                         void *b);</pre>
<p>
Given a buffer of input pixels, write a buffer of output pixels.</p>
<div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody>
<tr>
<td><p><span class="term"><em class="parameter"><code>in</code></em> :</span></p></td>
<td> input pixels
</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>out</code></em> :</span></p></td>
<td> write processed pixels here
</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>width</code></em> :</span></p></td>
<td> number of pixels in buffer
</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>a</code></em> :</span></p></td>
<td> user data
</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>b</code></em> :</span></p></td>
<td> user data
</td>
</tr>
</tbody>
</table></div>
</div>
<hr>
<div class="refsect2" title="im_wrapone ()">
<a name="im-wrapone"></a><h3>im_wrapone ()</h3>
<pre class="programlisting">int                 im_wrapone                          (IMAGE *in,
                                                         IMAGE *out,
                                                         <a
href="../libvips/libvips-generate.html#im-wrapone-fn"
>im_wrapone_fn</a> fn,
                                                         void *a,
                                                         void *b);</pre>
<p>
Wrap-up a buffer processing function as a PIO VIPS function.
</p>
<p>
Given an input image, an
output image and a buffer processing function, make a PIO image processing
operation.
</p>
<p>
See also: <a
href="../libvips/libvips-generate.html#im-wrapmany"
><code class="function">im_wrapmany()</code></a>, <a
href="../libvips/libvips-generate.html#im-wraptwo"
><code class="function">im_wraptwo()</code></a>, <a
href="../libvips/libvips-generate.html#im-generate"
><code class="function">im_generate()</code></a>.</p>
<div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody>
<tr>
<td><p><span class="term"><em class="parameter"><code>in</code></em> :</span></p></td>
<td> input image
</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>out</code></em> :</span></p></td>
<td> image to generate
</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>fn</code></em> :</span></p></td>
<td> buffer-processing function
</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>a</code></em> :</span></p></td>
<td> user data
</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>b</code></em> :</span></p></td>
<td> user data
</td>
</tr>
<tr>
<td><p><span class="term"><span class="emphasis"><em>Returns</em></span> :</span></p></td>
<td> 0 on success, or -1 on error.
</td>
</tr>
</tbody>
</table></div>
</div>
<hr>
<div class="refsect2" title="im_wraptwo_fn ()">
<a name="im-wraptwo-fn"></a><h3>im_wraptwo_fn ()</h3>
<pre class="programlisting">void                (*im_wraptwo_fn)                    (void *in1,
                                                         void *in2,
                                                         void *out,
                                                         int width,
                                                         void *a,
                                                         void *b);</pre>
<p>
Given a pair of buffers of input pixels, write a buffer of output pixels.</p>
<div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody>
<tr>
<td><p><span class="term"><em class="parameter"><code>in1</code></em> :</span></p></td>
<td> input pixels from image 1
</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>in2</code></em> :</span></p></td>
<td> input pixels from image 2
</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>out</code></em> :</span></p></td>
<td> write processed pixels here
</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>width</code></em> :</span></p></td>
<td> number of pixels in buffer
</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>a</code></em> :</span></p></td>
<td> user data
</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>b</code></em> :</span></p></td>
<td> user data
</td>
</tr>
</tbody>
</table></div>
</div>
<hr>
<div class="refsect2" title="im_wraptwo ()">
<a name="im-wraptwo"></a><h3>im_wraptwo ()</h3>
<pre class="programlisting">int                 im_wraptwo                          (IMAGE *in1,
                                                         IMAGE *in2,
                                                         IMAGE *out,
                                                         <a
href="../libvips/libvips-generate.html#im-wraptwo-fn"
>im_wraptwo_fn</a> fn,
                                                         void *a,
                                                         void *b);</pre>
<p>
Wrap-up a buffer processing function as a PIO VIPS function.
</p>
<p>
Given a pair of input images of the same size, an
output image and a buffer processing function, make a PIO image processing
operation.
</p>
<p>
See also: <a
href="../libvips/libvips-generate.html#im-wrapone"
><code class="function">im_wrapone()</code></a>, <a
href="../libvips/libvips-generate.html#im-wrapmany"
><code class="function">im_wrapmany()</code></a>, <a
href="../libvips/libvips-generate.html#im-generate"
><code class="function">im_generate()</code></a>.</p>
<div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody>
<tr>
<td><p><span class="term"><em class="parameter"><code>in1</code></em> :</span></p></td>
<td> first input image
</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>in2</code></em> :</span></p></td>
<td> second input image
</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>out</code></em> :</span></p></td>
<td> image to generate
</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>fn</code></em> :</span></p></td>
<td> buffer-processing function
</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>a</code></em> :</span></p></td>
<td> user data
</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>b</code></em> :</span></p></td>
<td> user data
</td>
</tr>
<tr>
<td><p><span class="term"><span class="emphasis"><em>Returns</em></span> :</span></p></td>
<td> 0 on success, or -1 on error.
</td>
</tr>
</tbody>
</table></div>
</div>
<hr>
<div class="refsect2" title="im_wrapmany_fn ()">
<a name="im-wrapmany-fn"></a><h3>im_wrapmany_fn ()</h3>
<pre class="programlisting">void                (*im_wrapmany_fn)                   (void **in,
                                                         void *out,
                                                         int width,
                                                         void *a,
                                                         void *b);</pre>
<p>
Given an array of buffers of input pixels, write a buffer of output pixels.</p>
<div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody>
<tr>
<td><p><span class="term"><em class="parameter"><code>in</code></em> :</span></p></td>
<td> <code class="literal">NULL</code>-terminated array of input buffers
</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>out</code></em> :</span></p></td>
<td> write processed pixels here
</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>width</code></em> :</span></p></td>
<td> number of pixels in buffer
</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>a</code></em> :</span></p></td>
<td> user data
</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>b</code></em> :</span></p></td>
<td> user data
</td>
</tr>
</tbody>
</table></div>
</div>
<hr>
<div class="refsect2" title="im_wrapmany ()">
<a name="im-wrapmany"></a><h3>im_wrapmany ()</h3>
<pre class="programlisting">int                 im_wrapmany                         (IMAGE **in,
                                                         IMAGE *out,
                                                         <a
href="../libvips/libvips-generate.html#im-wrapmany-fn"
>im_wrapmany_fn</a> fn,
                                                         void *a,
                                                         void *b);</pre>
<p>
Wrap-up a buffer processing function as a PIO VIPS function.
</p>
<p>
Given a NULL-terminated list of input images all of the same size, an
output image and a buffer processing function, make a PIO image processing
operation.
</p>
<p>
See also: <a
href="../libvips/libvips-generate.html#im-wrapone"
><code class="function">im_wrapone()</code></a>, <a
href="../libvips/libvips-generate.html#im-wraptwo"
><code class="function">im_wraptwo()</code></a>, <a
href="../libvips/libvips-generate.html#im-generate"
><code class="function">im_generate()</code></a>.</p>
<div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody>
<tr>
<td><p><span class="term"><em class="parameter"><code>in</code></em> :</span></p></td>
<td> <code class="literal">NULL</code>-terminated array of input images
</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>out</code></em> :</span></p></td>
<td> image to generate
</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>fn</code></em> :</span></p></td>
<td> buffer-processing function
</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>a</code></em> :</span></p></td>
<td> user data
</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>b</code></em> :</span></p></td>
<td> user data
</td>
</tr>
<tr>
<td><p><span class="term"><span class="emphasis"><em>Returns</em></span> :</span></p></td>
<td> 0 on success, or -1 on error.
</td>
</tr>
</tbody>
</table></div>
</div>
<hr>
<div class="refsect2" title="im_render_priority ()">
<a name="im-render-priority"></a><h3>im_render_priority ()</h3>
<pre class="programlisting">int                 im_render_priority                  (IMAGE *in,
                                                         IMAGE *out,
                                                         IMAGE *mask,
                                                         int width,
                                                         int height,
                                                         int max,
                                                         int priority,
                                                         void (notify IMAGE *, Rect *, void * ) (),
                                                         void *client);</pre>
<p>
This operation renders <em class="parameter"><code>in</code></em> in the background, making pixels available on
<em class="parameter"><code>out</code></em> as they are calculated. The <em class="parameter"><code>notify</code></em> callback is run every time a new
set of pixels are available. Calculated pixels are kept in a cache with
tiles sized <em class="parameter"><code>width</code></em> by <em class="parameter"><code>height</code></em> pixels and at most <em class="parameter"><code>max</code></em> tiles.
If <em class="parameter"><code>max</code></em> is -1, the cache is of unlimited size (up to the maximum image
size).
The <em class="parameter"><code>mask</code></em> image s a one-band uchar image and has 255 for pixels which are 
currently in cache and 0 for uncalculated pixels.
</p>
<p>
The pixel rendering system has a single global <a
href="../libvips/libvips-threadgroup.html#im-threadgroup-t"
><span class="type">im_threadgroup_t</span></a> which is 
used for all currently active instances of <a
href="../libvips/libvips-generate.html#im-render-priority"
><code class="function">im_render_priority()</code></a>. As
renderers are added and removed from the system, the threadgroup switches
between renderers based on their priority setting. Zero means normal
priority, negative numbers are low priority, positive numbers high
priority.
</p>
<p>
Calls to <a
href="../libvips/libvips-generate.html#im-prepare"
><code class="function">im_prepare()</code></a> on <em class="parameter"><code>out</code></em> return immediately and hold whatever is
currently in cache for that <a
href="../libvips/libvips-rect.html#Rect"
><span class="type">Rect</span></a> (check <em class="parameter"><code>mask</code></em> to see which parts of the
<a
href="../libvips/libvips-rect.html#Rect"
><span class="type">Rect</span></a> are valid). Any pixels in the <a
href="../libvips/libvips-rect.html#Rect"
><span class="type">Rect</span></a> which are not in cache are added
to a queue, and the <em class="parameter"><code>notify</code></em> callback will trigger when those pixels are
ready.
</p>
<p>
The <em class="parameter"><code>notify</code></em> callback is run from the background thread. In the callback,
you need to somehow send a message to the main thread that the pixels are
ready. In a glib-based application, this is easily done with <code class="function">g_idle_add()</code>.
</p>
<p>
If <em class="parameter"><code>notify</code></em> is <code class="literal">NULL</code>, then <a
href="../libvips/libvips-generate.html#im-render-priority"
><code class="function">im_render_priority()</code></a> runs synchronously.
<a
href="../libvips/libvips-generate.html#im-prepare"
><code class="function">im_prepare()</code></a> on <em class="parameter"><code>out</code></em> will always block until the pixels have been
calculated by the background <a
href="../libvips/libvips-threadgroup.html#im-threadgroup-t"
><span class="type">im_threadgroup_t</span></a>.
</p>
<p>
See also: <a
href="../libvips/libvips-generate.html#im-cache"
><code class="function">im_cache()</code></a>, <a
href="../libvips/libvips-generate.html#im-prepare"
><code class="function">im_prepare()</code></a>.</p>
<div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody>
<tr>
<td><p><span class="term"><em class="parameter"><code>in</code></em> :</span></p></td>
<td> input image
</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>out</code></em> :</span></p></td>
<td> output image
</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>mask</code></em> :</span></p></td>
<td> mask image indicating valid pixels
</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>width</code></em> :</span></p></td>
<td> tile width
</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>height</code></em> :</span></p></td>
<td> tile height
</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>max</code></em> :</span></p></td>
<td> maximum tiles to cache
</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>priority</code></em> :</span></p></td>
<td> rendering priority
</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>notify</code></em> :</span></p></td>
<td> pixels are ready notification callback
</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>client</code></em> :</span></p></td>
<td> client data for callback
</td>
</tr>
<tr>
<td><p><span class="term"><span class="emphasis"><em>Returns</em></span> :</span></p></td>
<td> 0 on sucess, -1 on error.
</td>
</tr>
</tbody>
</table></div>
</div>
<hr>
<div class="refsect2" title="im_cache ()">
<a name="im-cache"></a><h3>im_cache ()</h3>
<pre class="programlisting">int                 im_cache                            (IMAGE *in,
                                                         IMAGE *out,
                                                         int width,
                                                         int height,
                                                         int max);</pre>
<p>
<a
href="../libvips/libvips-generate.html#im-cache"
><code class="function">im_cache()</code></a> works exactly as <a
href="../libvips/libvips-conversion.html#im-copy"
><code class="function">im_copy()</code></a>, except that calculated pixels are
kept in a cache. If <em class="parameter"><code>in</code></em> is the result of a large computation and you are
expecting to reuse the result in a number of places, <a
href="../libvips/libvips-generate.html#im-cache"
><code class="function">im_cache()</code></a> can save a
lot of time.
</p>
<p>
<a
href="../libvips/libvips-generate.html#im-cache"
><code class="function">im_cache()</code></a> is a convenience function over <a
href="../libvips/libvips-generate.html#im-render-priority"
><code class="function">im_render_priority()</code></a>.
</p>
<p>
See also: <a
href="../libvips/libvips-generate.html#im-render-priority"
><code class="function">im_render_priority()</code></a>, <a
href="../libvips/libvips-conversion.html#im-copy"
><code class="function">im_copy()</code></a>, <a
href="../libvips/libvips-threadgroup.html#im-prepare-thread"
><code class="function">im_prepare_thread()</code></a>.</p>
<div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody>
<tr>
<td><p><span class="term"><em class="parameter"><code>in</code></em> :</span></p></td>
<td> input image
</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>out</code></em> :</span></p></td>
<td> output image
</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>width</code></em> :</span></p></td>
<td> tile width
</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>height</code></em> :</span></p></td>
<td> tile height
</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>max</code></em> :</span></p></td>
<td> maximum tiles to cache
</td>
</tr>
</tbody>
</table></div>
</div>
<hr>
<div class="refsect2" title="im_setupout ()">
<a name="im-setupout"></a><h3>im_setupout ()</h3>
<pre class="programlisting">int                 im_setupout                         (IMAGE *im);</pre>
<p>
This call gets the <span class="type">IMAGE</span> ready for scanline-based writing with 
<a
href="../libvips/libvips-generate.html#im-writeline"
><code class="function">im_writeline()</code></a>. You need to have set all the image fields, such as <em class="parameter"><code>Xsize</code></em>
and <em class="parameter"><code>BandFmt</code></em>, before calling this. 
</p>
<p>
See also: <a
href="../libvips/libvips-generate.html#im-writeline"
><code class="function">im_writeline()</code></a>, <a
href="../libvips/libvips-generate.html#im-generate"
><code class="function">im_generate()</code></a>, <a
href="../libvips/libvips-image.html#im-initdesc"
><code class="function">im_initdesc()</code></a>, <a
href="../libvips/libvips-image.html#im-cp-desc"
><code class="function">im_cp_desc()</code></a>.</p>
<div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody>
<tr>
<td><p><span class="term"><em class="parameter"><code>im</code></em> :</span></p></td>
<td> image to prepare for writing
</td>
</tr>
<tr>
<td><p><span class="term"><span class="emphasis"><em>Returns</em></span> :</span></p></td>
<td> 0 on success, or -1 on error.
</td>
</tr>
</tbody>
</table></div>
</div>
<hr>
<div class="refsect2" title="im_writeline ()">
<a name="im-writeline"></a><h3>im_writeline ()</h3>
<pre class="programlisting">int                 im_writeline                        (int ypos,
                                                         IMAGE *im,
                                                         PEL *linebuffer);</pre>
<p>
Write a line of pixels to an image. This function must be called repeatedly
with <em class="parameter"><code>ypos</code></em> increasing from 0 to <em class="parameter"><code>YSize</code></em> -
1. <em class="parameter"><code>linebuffer</code></em> must be <a
href="../libvips/libvips-image.html#IM-IMAGE-SIZEOF-LINE--CAPS"
><code class="function">IM_IMAGE_SIZEOF_LINE()</code></a> bytes long.
</p>
<p>
See also: <a
href="../libvips/libvips-generate.html#im-setupout"
><code class="function">im_setupout()</code></a>, <a
href="../libvips/libvips-generate.html#im-generate"
><code class="function">im_generate()</code></a>.</p>
<div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody>
<tr>
<td><p><span class="term"><em class="parameter"><code>ypos</code></em> :</span></p></td>
<td> vertical position of scan-line to write
</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>im</code></em> :</span></p></td>
<td> image to write to
</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>linebuffer</code></em> :</span></p></td>
<td> scanline of pixels
</td>
</tr>
<tr>
<td><p><span class="term"><span class="emphasis"><em>Returns</em></span> :</span></p></td>
<td> 0 on success, or -1 on error.
</td>
</tr>
</tbody>
</table></div>
</div>
</div>
<div class="refsect1" title="See Also">
<a name="libvips-generate.see-also"></a><h2>See Also</h2>
<a
href="../libvips/libvips-image.html"
>image</a>, 
<a
href="../libvips/libvips-region.html"
>region</a>
</div>
</div>
<div class="footer">
<hr>
          Generated by GTK-Doc V1.11</div>
</body>
</html>
